<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Calculadora de Interceptação</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    body {
      background: #000 url('veleiro1.png') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Menu Superior */
    .menu-bar {
      display: flex;
      justify-content: center;
      gap: 30px;
      padding: 15px 0;
      background-color: rgba(20, 20, 20, 0.9);
      font-weight: bold;
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .menu-bar a {
      color: white;
      text-decoration: none;
      padding: 6px 12px;
      border-radius: 4px;
      transition: background-color 0.3s;
    }

    .menu-bar a:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    h1 {
      text-align: center;
      margin-top: 2rem;
      margin-bottom: 1.5rem;
      font-size: 2rem;
      background-color: rgba(31, 31, 31, 0.7);
      padding: 15px;
      border-radius: 8px;
      display: inline-block;
    }

    a {
      color: #00d1ff;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    .footer {
      text-align: center;
      padding: 1rem;
      font-size: 0.9rem;
      color: #aaa;
      background-color: rgba(20, 20, 20, 0.8);
      margin-top: auto;
    }

    /* Conteúdo Principal */
    .content-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background-color: rgba(40, 40, 40, 0.9);
      border-radius: 10px;
      margin-bottom: 2rem;
      width: 90%;
    }

    .calculator-container {
      padding: 20px;
    }

    .calculator-container h1, .calculator-container h2 {
      color: #00d1ff;
    }

    .calculator-container h1 {
      text-align: center;
    }

    /* Seção de Inputs */
    .input-section {
      background: rgba(60, 60, 60, 0.8);
      padding: 25px;
      border-radius: 10px;
      margin-bottom: 25px;
    }

    .input-section h2 {
      margin-top: 0;
      color: #00d1ff;
      text-align: center;
    }

    .contact-group {
      margin-bottom: 30px;
      padding: 20px;
      border: 1px solid rgba(0, 209, 255, 0.3);
      border-radius: 8px;
    }

    .contact-group h3 {
      margin-top: 0;
      color: #00d1ff;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .input-row {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 15px;
      align-items: center;
    }

    .input-group {
      flex: 1;
      min-width: 250px;
    }

    .input-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }

    .input-group input {
      width: 100%;
      padding: 10px;
      border: 1px solid #00d1ff;
      border-radius: 4px;
      background-color: rgba(50, 50, 50, 0.8);
      color: white;
      box-sizing: border-box;
    }

    .coordinates-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .coordinate-input {
      flex: 1;
      min-width: 80px;
    }

    .coordinate-input input {
      width: 100%;
    }

    /* Botões de Ação */
    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 30px 0;
      flex-wrap: wrap;
    }

    .action-btn {
      padding: 12px 30px;
      font-size: 1.1rem;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .calculate-btn {
      background: linear-gradient(to right, #1e88e5, #0d47a1);
      color: white;
    }

    .clear-btn {
      background: linear-gradient(to right, #e53935, #b71c1c);
      color: white;
    }

    .action-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }

    .action-btn:active {
      transform: translateY(1px);
    }

    /* Resultados */
    .results-section {
      background: rgba(60, 60, 60, 0.8);
      padding: 25px;
      border-radius: 10px;
      margin-top: 25px;
      display: none;
    }

    .results-section h2 {
      margin-top: 0;
      color: #00d1ff;
      text-align: center;
    }

    .results-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .result-card {
      background: rgba(30, 136, 229, 0.2);
      border-radius: 8px;
      padding: 20px;
      text-align: center;
    }

    .result-card h3 {
      margin-top: 0;
      color: #00d1ff;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .result-value {
      font-size: 1.5rem;
      font-weight: bold;
      margin: 10px 0;
      color: #4fc3f7;
    }

    .result-description {
      font-size: 0.9rem;
      color: #ccc;
    }

    /* Status */
    .status-message {
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      text-align: center;
      font-weight: bold;
      display: none;
    }

    .status-error {
      background: rgba(231, 76, 60, 0.2);
      border: 1px solid #e74c3c;
      color: #e74c3c;
    }

    @media (max-width: 768px) {
      .menu-bar {
        flex-wrap: wrap;
        gap: 10px;
      }
      
      .content-container {
        width: 95%;
        padding: 10px;
      }
      
      .input-row {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .input-group {
        width: 100%;
      }
      
      .action-buttons {
        flex-direction: column;
      }
      
      .action-btn {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>

  <!-- Barra de Menu -->
  <div class="menu-bar">
    <a href="prompts.html">Prompts</a>
    <a href="como-usar.html">Como Usar</a>
    <a href="ias.html">IAs</a>
    <a href="sistemas.html">Sistemas</a>
    <a href="noticias.html">Notícias</a>
    <a href="globo.html">Globo</a>
    <a href="linksuteis.html">Links Úteis</a>
  </div>

  <!-- Título -->
  <h1>Calculadora de Interceptação</h1>

  <!-- Conteúdo Principal -->
  <div class="content-container">
    <div class="calculator-container">
      <div class="input-section">
        <h2><i class="fas fa-calculator"></i> Dados dos Contatos</h2>
        
        <!-- Contato 1 -->
        <div class="contact-group">
          <h3><i class="fas fa-ship"></i> Contato 1</h3>
          
          <div class="input-row">
            <div class="input-group">
              <label for="nome1">Nome do Navio:</label>
              <input type="text" id="nome1" placeholder="Ex: Navio Alfa">
            </div>
            
            <div class="input-group">
              <label for="velocidade1">Velocidade (nós):</label>
              <input type="number" id="velocidade1" placeholder="Ex: 12.5" step="0.1">
            </div>
          </div>
          
          <div class="input-row">
            <div class="input-group">
              <label>Posição Inicial:</label>
              <div class="coordinates-group">
                <div class="coordinate-input">
                  <label for="lat1">Latitude:</label>
                  <input type="text" id="lat1" placeholder="Ex: 23º33'00&quot;S">
                </div>
                <div class="coordinate-input">
                  <label for="lng1">Longitude:</label>
                  <input type="text" id="lng1" placeholder="Ex: 46º38'00&quot;W">
                </div>
              </div>
            </div>
          </div>
          
          <div class="input-row">
            <div class="input-group">
              <label>Rumo (graus):</label>
              <input type="number" id="rumo1" placeholder="Ex: 45" min="0" max="360">
            </div>
          </div>
        </div>
        
        <!-- Contato 2 -->
        <div class="contact-group">
          <h3><i class="fas fa-ship"></i> Contato 2</h3>
          
          <div class="input-row">
            <div class="input-group">
              <label for="nome2">Nome do Navio:</label>
              <input type="text" id="nome2" placeholder="Ex: Navio Beta">
            </div>
            
            <div class="input-group">
              <label for="velocidade2">Velocidade (nós):</label>
              <input type="number" id="velocidade2" placeholder="Ex: 10.0" step="0.1">
            </div>
          </div>
          
          <div class="input-row">
            <div class="input-group">
              <label>Posição Inicial:</label>
              <div class="coordinates-group">
                <div class="coordinate-input">
                  <label for="lat2">Latitude:</label>
                  <input type="text" id="lat2" placeholder="Ex: 23º30'00&quot;S">
                </div>
                <div class="coordinate-input">
                  <label for="lng2">Longitude:</label>
                  <input type="text" id="lng2" placeholder="Ex: 46º40'00&quot;W">
                </div>
              </div>
            </div>
          </div>
          
          <div class="input-row">
            <div class="input-group">
              <label>Rumo (graus):</label>
              <input type="number" id="rumo2" placeholder="Ex: 135" min="0" max="360">
            </div>
          </div>
        </div>
        
        <div class="action-buttons">
          <button id="calculateBtn" class="action-btn calculate-btn">
            <i class="fas fa-calculator"></i> Calcular Interceptação
          </button>
          <button id="clearBtn" class="action-btn clear-btn">
            <i class="fas fa-trash-alt"></i> Limpar Campos
          </button>
        </div>
        
        <div id="statusMessage" class="status-message"></div>
      </div>
      
      <!-- Resultados -->
      <div class="results-section" id="resultsSection">
        <h2><i class="fas fa-chart-line"></i> Resultados da Interceptação</h2>
        
        <div class="results-grid">
          <div class="result-card">
            <h3><i class="fas fa-map-marker-alt"></i> Ponto de Interceptação</h3>
            <div class="result-value" id="pontoInterceptacao">--°--'--"--</div>
            <div class="result-description">Coordenadas onde os contatos se encontrarão</div>
          </div>
          
          <div class="result-card">
            <h3><i class="fas fa-clock"></i> Tempo até Interceptação</h3>
            <div class="result-value" id="tempoInterceptacao">-- h -- min</div>
            <div class="result-description">Tempo estimado até o ponto de encontro</div>
          </div>
          
          <div class="result-card">
            <h3><i class="fas fa-tachometer-alt"></i> Distância Inicial</h3>
            <div class="result-value" id="distanciaInicial">-- nm</div>
            <div class="result-description">Distância entre os contatos no início</div>
          </div>
          
          <div class="result-card">
            <h3><i class="fas fa-exclamation-triangle"></i> Status</h3>
            <div class="result-value" id="statusInterceptacao">--</div>
            <div class="result-description">Possibilidade de interceptação</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Rodapé -->
  <div class="footer">
    &copy; 2025 Central Marítima e Operacional | Todos os direitos reservados.
  </div>

  <script>
    // Elementos DOM
    const calculateBtn = document.getElementById('calculateBtn');
    const clearBtn = document.getElementById('clearBtn');
    const statusMessage = document.getElementById('statusMessage');
    const resultsSection = document.getElementById('resultsSection');
    
    // Função para mostrar mensagens de status
    function showStatus(message, isError = false) {
      statusMessage.textContent = message;
      statusMessage.className = 'status-message';
      if (isError) {
        statusMessage.classList.add('status-error');
      }
      statusMessage.style.display = 'block';
      
      // Esconder mensagem após 5 segundos
      setTimeout(() => {
        statusMessage.style.display = 'none';
      }, 5000);
    }
    
    // Função para converter DMS para Decimal
    function dmsToDecimal(dms) {
      const regex = /(\d{1,3})[º°](\d{1,2}(?:\.\d+)?)['′]?(\d{1,2}(?:\.\d+)?)["″]?([NSEWnsew])/;
      const matches = dms.match(regex);
      
      if (!matches) {
        // Tentar formato alternativo sem segundos
        const regexAlt = /(\d{1,3})[º°](\d{1,2}(?:\.\d+)?)['′]?([NSEWnsew])/;
        const matchesAlt = dms.match(regexAlt);
        if (!matchesAlt) return null;
        
        const degrees = parseFloat(matchesAlt[1]);
        const minutes = parseFloat(matchesAlt[2]);
        const seconds = 0;
        const direction = matchesAlt[3].toUpperCase();
        
        let decimal = degrees + minutes/60;
        if (direction === 'S' || direction === 'W') decimal = -decimal;
        return decimal;
      }
      
      const degrees = parseFloat(matches[1]);
      const minutes = parseFloat(matches[2]);
      const seconds = parseFloat(matches[3]);
      const direction = matches[4].toUpperCase();
      
      let decimal = degrees + minutes/60 + seconds/3600;
      if (direction === 'S' || direction === 'W') decimal = -decimal;
      return decimal;
    }
    
    // Função para converter Decimal para DMS
    function decimalToDMS(decimal, isLatitude) {
      const absolute = Math.abs(decimal);
      const degrees = Math.floor(absolute);
      const minutes = Math.floor((absolute - degrees) * 60);
      const seconds = ((absolute - degrees - minutes/60) * 3600).toFixed(2);
      const direction = decimal >= 0 ? (isLatitude ? "N" : "E") : (isLatitude ? "S" : "W");
      
      return `${degrees}º${minutes}'${seconds}"${direction}`;
    }
    
    // Função para calcular distância entre dois pontos (fórmula de Haversine)
    function calcularDistancia(lat1, lng1, lat2, lng2) {
      const R = 3440.065; // Raio da Terra em milhas náuticas
      const dLat = (lat2 - lat1) * Math.PI / 180;
      const dLng = (lng2 - lng1) * Math.PI / 180;
      const a = 
        Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * 
        Math.sin(dLng/2) * Math.sin(dLng/2);
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
      return R * c;
    }
    
    // Função para calcular o ponto de interceptação
    function calcularInterceptacao() {
      // Obter valores dos inputs
      const nome1 = document.getElementById('nome1').value || 'Contato 1';
      const velocidade1 = parseFloat(document.getElementById('velocidade1').value);
      const lat1DMS = document.getElementById('lat1').value;
      const lng1DMS = document.getElementById('lng1').value;
      const rumo1 = parseFloat(document.getElementById('rumo1').value);
      
      const nome2 = document.getElementById('nome2').value || 'Contato 2';
      const velocidade2 = parseFloat(document.getElementById('velocidade2').value);
      const lat2DMS = document.getElementById('lat2').value;
      const lng2DMS = document.getElementById('lng2').value;
      const rumo2 = parseFloat(document.getElementById('rumo2').value);
      
      // Validar entradas
      if (isNaN(velocidade1) || isNaN(velocidade2) || isNaN(rumo1) || isNaN(rumo2)) {
        showStatus('Por favor, preencha todos os campos numéricos corretamente.', true);
        return;
      }
      
      if (!lat1DMS || !lng1DMS || !lat2DMS || !lng2DMS) {
        showStatus('Por favor, preencha todas as coordenadas.', true);
        return;
      }
      
      const lat1 = dmsToDecimal(lat1DMS);
      const lng1 = dmsToDecimal(lng1DMS);
      const lat2 = dmsToDecimal(lat2DMS);
      const lng2 = dmsToDecimal(lng2DMS);
      
      if (lat1 === null || lng1 === null || lat2 === null || lng2 === null) {
        showStatus('Formato de coordenadas inválido. Use o formato: 23º33\'00"S ou 46º38\'00"W', true);
        return;
      }
      
      // Calcular distância inicial
      const distanciaInicial = calcularDistancia(lat1, lng1, lat2, lng2);
      
      // Converter rumos para radianos
      const rumo1Rad = rumo1 * Math.PI / 180;
      const rumo2Rad = rumo2 * Math.PI / 180;
      
      // Calcular vetores de velocidade
      const vx1 = velocidade1 * Math.sin(rumo1Rad);
      const vy1 = velocidade1 * Math.cos(rumo1Rad);
      const vx2 = velocidade2 * Math.sin(rumo2Rad);
      const vy2 = velocidade2 * Math.cos(rumo2Rad);
      
      // Calcular diferença de posição
      const dx = lng2 - lng1;
      const dy = lat2 - lat1;
      
      // Resolver equação para tempo de interceptação
      // (x1 + vx1*t - x2 - vx2*t)^2 + (y1 + vy1*t - y2 - vy2*t)^2 = (v1*t - v2*t)^2
      // Simplificando: (dx + (vx1-vx2)*t)^2 + (dy + (vy1-vy2)*t)^2 = ((v1-v2)*t)^2
      
      const dvx = vx1 - vx2;
      const dvy = vy1 - vy2;
      const dv = Math.sqrt(dvx*dvx + dvy*dvy);
      
      // Se os navios estão se movendo na mesma direção e velocidade, não há interceptação
      if (dv === 0) {
        document.getElementById('pontoInterceptacao').textContent = 'N/A';
        document.getElementById('tempoInterceptacao').textContent = 'N/A';
        document.getElementById('distanciaInicial').textContent = `${distanciaInicial.toFixed(2)} nm`;
        document.getElementById('statusInterceptacao').textContent = 'Movimento paralelo';
        resultsSection.style.display = 'block';
        return;
      }
      
      // Resolver a equação quadrática
      const a = dvx*dvx + dvy*dvy;
      const b = 2 * (dx*dvx + dy*dvy);
      const c = dx*dx + dy*dy;
      
      const discriminant = b*b - 4*a*c;
      
      if (discriminant < 0) {
        document.getElementById('pontoInterceptacao').textContent = 'N/A';
        document.getElementById('tempoInterceptacao').textContent = 'N/A';
        document.getElementById('distanciaInicial').textContent = `${distanciaInicial.toFixed(2)} nm`;
        document.getElementById('statusInterceptacao').textContent = 'Sem interceptação';
        resultsSection.style.display = 'block';
        return;
      }
      
      // Calcular tempo de interceptação
      const t1 = (-b + Math.sqrt(discriminant)) / (2*a);
      const t2 = (-b - Math.sqrt(discriminant)) / (2*a);
      
      // Escolher o menor tempo positivo
      let tempoInterceptacao;
      if (t1 >= 0 && t2 >= 0) {
        tempoInterceptacao = Math.min(t1, t2);
      } else if (t1 >= 0) {
        tempoInterceptacao = t1;
      } else if (t2 >= 0) {
        tempoInterceptacao = t2;
      } else {
        document.getElementById('pontoInterceptacao').textContent = 'N/A';
        document.getElementById('tempoInterceptacao').textContent = 'N/A';
        document.getElementById('distanciaInicial').textContent = `${distanciaInicial.toFixed(2)} nm`;
        document.getElementById('statusInterceptacao').textContent = 'Passado';
        resultsSection.style.display = 'block';
        return;
      }
      
      // Calcular ponto de interceptação
      const latInterceptacao = lat1 + vy1 * tempoInterceptacao;
      const lngInterceptacao = lng1 + vx1 * tempoInterceptacao;
      
      // Converter para DMS
      const latInterceptacaoDMS = decimalToDMS(latInterceptacao, true);
      const lngInterceptacaoDMS = decimalToDMS(lngInterceptacao, false);
      
      // Converter tempo para horas e minutos
      const horas = Math.floor(tempoInterceptacao);
      const minutos = Math.floor((tempoInterceptacao - horas) * 60);
      
      // Atualizar resultados
      document.getElementById('pontoInterceptacao').textContent = `${latInterceptacaoDMS} / ${lngInterceptacaoDMS}`;
      document.getElementById('tempoInterceptacao').textContent = `${horas} h ${minutos} min`;
      document.getElementById('distanciaInicial').textContent = `${distanciaInicial.toFixed(2)} nm`;
      document.getElementById('statusInterceptacao').textContent = 'Interceptação possível';
      
      resultsSection.style.display = 'block';
      
      showStatus('Cálculo de interceptação realizado com sucesso!', false);
    }
    
    // Função para limpar campos
    function limparCampos() {
      document.getElementById('nome1').value = '';
      document.getElementById('velocidade1').value = '';
      document.getElementById('lat1').value = '';
      document.getElementById('lng1').value = '';
      document.getElementById('rumo1').value = '';
      
      document.getElementById('nome2').value = '';
      document.getElementById('velocidade2').value = '';
      document.getElementById('lat2').value = '';
      document.getElementById('lng2').value = '';
      document.getElementById('rumo2').value = '';
      
      resultsSection.style.display = 'none';
      statusMessage.style.display = 'none';
    }
    
    // Eventos
    calculateBtn.addEventListener('click', calcularInterceptacao);
    clearBtn.addEventListener('click', limparCampos);
    
    // Adicionar exemplo para demonstração
    window.onload = function() {
      // Preencher com dados de exemplo após 1 segundo
      setTimeout(() => {
        document.getElementById('nome1').value = 'Navio Alfa';
        document.getElementById('velocidade1').value = '12.5';
        document.getElementById('lat1').value = '23º33\'00"S';
        document.getElementById('lng1').value = '46º38\'00"W';
        document.getElementById('rumo1').value = '45';
        
        document.getElementById('nome2').value = 'Navio Beta';
        document.getElementById('velocidade2').value = '10.0';
        document.getElementById('lat2').value = '23º30\'00"S';
        document.getElementById('lng2').value = '46º40\'00"W';
        document.getElementById('rumo2').value = '135';
      }, 1000);
    };
  </script>
</body>
</html>
